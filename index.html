<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="style.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>Vite App</title>
    </head>
    <body>
        <div class="container">
            <div class="textWrapper">
                <header>발음 듣기</header>
                <textarea name="content" id="content" cols="30" rows="10" class="content" placeholder="문장을 적어주세요" autofocus></textarea>
            </div>
            <div class="btns">
                <h3>듣기 속도 : 1.0</h3>
                <button class="read-btn" onclick="readText()">듣기</button>
                <button class="speed-btn" onclick="changeSpeed('increase')">속도 증가</button>
                <button class="speed-btn" onclick="changeSpeed('decrease')">속도 감소</button>
            </div>
        </div>
        <script>
            let speechSpeed = 1.0;

            const readText = () => {
                const content = document.getElementById("content").value;

                // Web Speech API를 지원하는지 확인
                if ("speechSynthesis" in window) {
                    const speech = new SpeechSynthesisUtterance();
                    speech.text = content;

                    // 한국어로 읽도록 설정
                    speech.lang = "ko-KR";

                    // 읽기 속도 설정
                    speech.rate = speechSpeed;

                    // 읽기 시작
                    window.speechSynthesis.speak(speech);
                } else {
                    alert("죄송합니다. 브라우저가 Web Speech API를 지원하지 않습니다.");
                }
            };

            const changeSpeed = (type) => {
                if (type === "increase") {
                    speechSpeed += 0.1;
                } else if (type === "decrease") {
                    speechSpeed -= 0.1;
                }

                // 최소 및 최대 속도 제한 (0.1에서 10까지)
                speechSpeed = Math.max(0.1, Math.min(10, speechSpeed));

                document.querySelector("h3").innerText = `읽기 속도: ${speechSpeed.toFixed(1)}`;
            };
        </script>
    </body>
</html>
